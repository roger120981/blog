---
import FixedHeader from "@layouts/page/_components/FixedHeader.astro";
import App from "./App.svelte";

interface ImageFile {
  default: {
    src: string;
  };
}

// Glob all player image files from public folder
const imageFiles = Object.values(
  import.meta.glob<ImageFile>("../../../../../public/img/possible-game/*.jpg", {
    eager: true,
  })
);

// Extract valid player names into an array to pass to svelte app
const validPlayerNames: string[] = [];
imageFiles.forEach((file) => {
  const fileName = file.default.src.match(/[a-z-]+\.jpg/)?.[0];
  const name = fileName?.match(/[a-z-]+/)?.[0];

  if (name) {
    validPlayerNames.push(name);
  }
});
---

<FixedHeader />
<App {validPlayerNames} client:load />
